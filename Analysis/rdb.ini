//RDB演算の定義
テーブル：射影＝「｜;fs｜
　　fs=配列！作る。
　　_rest！「｜f｜
　　　　「｜n｜「（フィールド名！（n）読む）＝＝f」！なら「fs！（n）書く」実行」！（フィールド名！要素数？）繰り返す。
　　」それぞれ実行。
　　ret＝テーブル！（_rest）作る。
　　自分！「｜r｜a=配列！作る。fs！「｜n｜a！（r！（n）読む）書く」それぞれ実行。ret！（a）put」それぞれ実行。
」。

テーブル：選択＝「｜条件｜
自分：分析結果！クリア．
　　ret＝テーブル！（フィールド名）作る。
　　自分！「｜r｜
　　　　「｜n｜
　　　　　　f＝フィールド名！（n）読む。
　　　　　　v＝r！（n）読む。
　　　　　　s＝""+f+"＝"+コード文字(0x22)+v+コード文字(0x22)+"。"。
　　　　　　（s）！実行。
　　　　」！（フィールド名！要素数？）繰り返す。
　　　　//条件が正しければ戻り値にrを設定
　　　　「（条件！実行）」！なら「ret！（r）書く」実行。
　　」それぞれ実行。
　　ret。
」。
テーブル：結合＝「｜t｜
　　「｜n｜f=自分：フィールド名！（n）読む。// 結合キーkの判別
　　　　「｜i｜f2＝t:フィールド名！（i）読む。
　　　　　　「f==f2」！なら「kf=f。kn=n。ki=i」実行。
　　　　」！（t：フィールド名！要素数？）繰り返す。
　　」！（自分：フィールド名！要素数？）繰り返す。

　　fn＝配列！作る。// 結合後のフィールド名の取得
　　自分：フィールド名！「｜f｜fn！（f）書く」それぞれ実行。
　　t：フィールド名！「｜f2｜
　　　　「f2！=kf」！なら「fn！（f2）書く」実行。
　　」それぞれ実行。

　　ret＝テーブル！（fn）作る。
　　自分！「｜r｜
　　　　kv＝r！（kn）読む。
　　　　t！「｜r2｜
　　　　　　kv2＝r2！（ki）読む。
　　　　　　「kv==kv2」！なら「
　　　　　　　　rr＝配列！作る。
　　　　　　　　「｜j｜ rr！（r！（j）読む）書く」！（自分：フィールド名！要素数？）繰り返す。
　　　　　　　　「｜i｜「i！＝ki」！なら「
　　　　　　　　　　rr！（r2！（i）読む）書く。
　　　　　　　　」実行。」！（t：フィールド名！要素数？）繰り返す。
　　　　　　　　ret！（rr）書く。
　　　　　　」実行。
　　　　」それぞれ実行。

　　」それぞれ実行。
　　ret。
」。

テーブル：小さい順＝「|並び替えたいフィールド名;quick ret res|

  並び替えたいフィールド名の番号＝０．
  「｜番号｜
    「（フィールド名！（番号）読む）＝＝並び替えたいフィールド名」！なら「
      並び替えたいフィールド名の番号＝番号。
    」実行。
  」！（フィールド名！要素数？）繰り返す。
  quick=「｜arr num ; ret n p left right v｜
  　　ret=arr。
  　　n＝arr！要素数？。
  　　「n＞1」！なら「
  　　　　p=arr！（n） 読む。
  　　　　left=配列！作る。
  　　　　right=配列！作る。
  　　　　「｜i｜
  　　　　　　v＝arr！（i）読む。
  　　　　　　「(v!(num)読む)<(p!(num)読む)」！なら「left！（v）書く」そうでなければ「right！（v）書く」実行。
  　　　　」！（n-1）繰り返す。

  　　　　ret＝配列！作る（！（left）(num)quick）（配列！（p）作る）（！（right）(num)quick）連結。
  　　」実行。
  　　ret。
  」。

  res=!(自分) (並び替えたいフィールド名の番号)quick.

  ret=テーブル！(フィールド名)作る。
  「|n|ret!(res!(n)読む)書く」！（res!要素数？）繰り返す。
  ret.
」。

テーブル：大きい順＝「|並び替えたいフィールド名;quick ret res|

  並び替えたいフィールド名の番号＝０．
  「｜番号｜
    「（フィールド名！（番号）読む）＝＝並び替えたいフィールド名」！なら「
      並び替えたいフィールド名の番号＝番号。
    」実行。
  」！（フィールド名！要素数？）繰り返す。
  quick=「｜arr num ; ret n p left right v｜
  　　ret=arr。
  　　n＝arr！要素数？。
  　　「n＞1」！なら「
  　　　　p=arr！（n） 読む。
  　　　　left=配列！作る。
  　　　　right=配列！作る。
  　　　　「｜i｜
  　　　　　　v＝arr！（i）読む。
  　　　　　　「(v!(num)読む)>(p!(num)読む)」！なら「left！（v）書く」そうでなければ「right！（v）書く」実行。
  　　　　」！（n-1）繰り返す。

  　　　　ret＝配列！作る（！（left）(num)quick）（配列！（p）作る）（！（right）(num)quick）連結。
  　　」実行。
  　　ret。
  」。

  res=!(自分) (並び替えたいフィールド名の番号)quick.

  ret=テーブル！(フィールド名)作る。
  「|n|ret!(res!(n)読む)書く」！（res!要素数？）繰り返す。
  ret.
」。

テーブル：重複＝「
	fieldName＝_rest!getarg　1 読む。
	two_arr＝自分！(fieldName)　射影。
　arr=配列！作る。
	「(arr!要素数?)==0」!なら「flag = true」実行.
　two_arr！「｜n｜
			arr!「｜l ｜
				「(l) == （n！１　読む）」!なら　
				「flag=false」実行．
			」それぞれ実行。
			「flag == true」!なら
			「arr！（n！１　読む）書く。」実行．
			flag = true.
	」それぞれ実行．
	ret = テーブル！(fieldName)作る．
	arr！「｜n｜
   		ret！(n)書く．
   	」それぞれ実行．
   	ret.
」．
